<% titleBuilder.add(user.username) %>
<% include header.ejs %>
<section id="user-repos">
	<div class="well">
		<div class="row">
			<a href="<%= user.github.html_url %>" class="col-1">
				<img src="http://www.gravatar.com/avatar/<%= user.github.gravatar_id %>?s=80" alt="" class="img-rounded"/>
			</a>

			<div class="data col-4">
				<p>
					<%= user.displayName %>
					<% if (user.displayName != user.username) { %>
					&nbsp;(<%= user.username %>)
					<% } %>
				</p>

				<p><b>Type:</b> <%= user.github.type %></p>
			</div>
		</div>
	</div>

	<% if (!supports.length) { %>
	<% if (isLoggedIn && loggedUser._id == user._id) { %>
	<h4 class="text-center">
		You didn't added any projects yet, want to add some?
		<a class="btn btn-primary btn-lg" href="/users/<%= user.username %>/editor">Sure!</a>
	</h4>
	<% } else { %>
	<h4 class="text-center">This user didn't added any projects yet</h4>
	<% } %>
	<% } %>

	<div class="repos-list">
		<% if (supports.length) { %>
		<div class="controls row">
			<div class="col repo-name"></div>
			<div class="col support-types text-center">
				<b>How I contribute</b>
			</div>
			<div class="col contribution-types">
				<b>Authors preferred method of contribution</b>
			</div>
		</div>
		<% } %>
		<% _.each(supports, function(repo) { %>
		<div class="repo <%= repo.project.fork ? 'fork' : '' %>">
			<div class="col repo-name">
				<a href="<%= repo.project.url %>" class="icon-github-sign" target="_blank"></a>
				<%= repo.project.owner.username %>/<%= repo.project.name %>
			</div>
			<div class="col support-types">
				<span class="support-type donating <%= repo.donating ? 'active' : '' %>" proxy-tap="toggle-support" data-type="donating" title="I'm donating"></span>
				<span class="support-type contributing <%= repo.contributing ? 'active' : '' %>" proxy-tap="toggle-support" data-type="contributing" title="I'm contributing"></span>
				<span class="support-type supporting <%= repo.supporting ? 'active' : '' %>" proxy-tap="toggle-support" data-type="supporting" title="I'm supporting in other way"></span>
			</div>
			<div class="col contribution-types">
				<% var contributions = repo.project.owner.contributions; %>
				<% include contributions.ejs %>
			</div>
		</div>
		<% }) %>
	</div>
	<div class="modal fade" id="email-to-author" tabindex="-1" role="dialog">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title">Send Comment To Author</h4>
				</div>
				<div class="modal-body">
					<textarea class="form-control" rows="3"></textarea>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					<button type="button" class="btn btn-primary" data-dismiss="modal">Send</button>
				</div>
			</div>
		</div>
	</div>
</section>
<script type="text/javascript" src="<%= jsPath %>/vendors/jquery/js/jquery.js"></script>
<script type="text/javascript" src="<%= jsPath %>/bootstrap.js"></script>
<% include footer.ejs %>
